# !/usr/bin/env python

import sys
#sys.path.insert(0, "/Users/crisl-adm/Tools/galaxy/galaxy/tools/eupath/Tools/lib/python")
sys.path.insert(0, "/opt/galaxy/tools/eupath/Tools/lib/python")
from eupath import GeneListEupathExporter
from eupath import EupathExporter
import optparse
import sys
import re


def main():
    """
      The following program is a Galaxy Tool for exporting gene list data from Galaxy to EuPathDB via iRODS.

      Sample for testing outside of Galaxy:
      python exportGeneListToEuPathDB
             "a name" "a summary" "a description" "test-data/genelist.txt" "<user.wdk_id@eupath.org>" <this directory>
    """

    parser = optparse.OptionParser()
    (options, args) = parser.parse_args()

    # Create and populate the meta.json file that must be included in the tarball
    exporter = GeneListEupathExporter.GeneListExport(args)
    try:
        exporter.export()
    except EupathExporter.ValidationException as ve:
        print >> sys.stderr, str(ve)
        sys.exit(1)


if __name__ == "__main__":
    sys.exit(main())